"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var viewPropertyDescriptors={definedByViewPropertyDescriptors:{value:!0},__attributes:{writable:!0},setAttributes:{value:function(e){return this.__attributes=e,this}},__childElements:{writable:!0},setChildElements:{value:function(e){return this.__childElements=e,this}},promise:{writable:!0},render:{value:function(e,t){var s=this,r=1<arguments.length&&void 0!==t&&t;if(this.hasAttributes()){for(var n=[],i=0,o=this.attributes.length;i<o;i++)n.push(this.attributes[i].name);n.forEach(function(e){s.removeAttribute(e)})}for(;this.firstChild;)this.removeChild(this.firstChild);function u(e,t){if(t=t||s.appendChild(document.createElement("span")),Array.isArray(e))return t.parentNode.removeChild(t),f(e);if("function"==typeof e)return u(e(s),t);if(e instanceof Promise)return e.then(function(e){return u(e,t)});var r;if(e instanceof HTMLElement||e instanceof Text)t.parentNode.insertBefore(e,t),e.definedByViewPropertyDescriptors&&(r=e.promise);else if("string"==typeof e){var n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.parentNode.insertBefore(n.firstChild,t)}return t.parentNode.removeChild(t),r}var f=function t(e){return"function"==typeof e?t(e(s)):e instanceof Promise?e.then(function(e){return t(e)}):e instanceof HTMLElement?u(e):Array.isArray(e)?Promise.all(e.map(function(e){return u(e)})):null!=e?t([e]):void 0};return this.promise=Promise.all([function r(n,t){if(null==n||!1===n)return n;if(Array.isArray(n)){var i=[];return n.forEach(function(e,t){n[t]=r(e),n[t]instanceof Promise&&i.push(n[t].then(function(e){n[t]=e}))}),0<i.length?Promise.all(i).then(function(){return r(n.join(" "),t)}):r(n.join(" "),t)}if(n instanceof Promise)return console.log("PROMISE"),n.then(function(e){return console.log("DONE",e,t),r(e,t)});if("object"!==_typeof(n))return"function"==typeof n?r(n(),t):("boolean"==typeof n?r("",t):t&&(console.log("SET ATTRIBUTE",t,n),s.setAttribute(t,n)),n);var e=[];for(var o in n)e.push(r(n[o],o));return Promise.all(e)}(this.__attributes),f(this.__childElements)]).then(function(){var t=[];return!r&&s.__childElements&&Array.isArray(s.__childElements)&&s.__childElements.forEach(function(e){e.definedByViewPropertyDescriptors&&t.push(e.render().promise)}),Promise.all(t)}).then(function(){if(e)return e=Array.isArray(e)?e:[e],Promise.all(e.map(function(e){return e(s)}))}).then(function(){return s}),this}}};