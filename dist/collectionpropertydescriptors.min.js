"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}var collectionPropertyDescriptors={definedByCollectionPropertyDescriptors:{value:!0},__collectionData:{writable:!0},length:{get:function(){return this.__collectionData?this.__collectionData.length:0}},finalizeData:{value:function(t){for(var e=this;t!==this.length;)t<this.length?function(){var o=String(t);Object.defineProperty(e,o,{configurable:!0,enumerable:!0,set:function(t){var e=this;if(this.__collectionData[o]!==t){var r=this.__collectionData[o];this.itemSetter.call(this,t,function(){e.__collectionData[o]=t,e.definedByEventfulPropertyDescriptors&&(e.trigger("change",o,t,r),e.trigger("change:".concat(o),t,r))})}},get:function(){var t=this;return this.itemGetter(function(){return t.__collectionData[o]})}}),t++}():(delete this[String(t-1)],t--)}},itemSetter:{value:function(t,e){e()}},itemGetter:{value:function(t){return t()}},toArray:{value:function(){var r=this.__collectionData.slice();return r.forEach(function(t,e){t.definedByModelPropertyDescriptors&&(r[e]=t.toJSON()),t.definedByCollectionPropertyDescriptors&&(r[e]=t.toArray())}),r}}};function collectionFactory(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Array.isArray(e)||(r=e,e=[]),r.definedByEventfulPropertyDescriptors||Object.defineProperties(r,eventfulPropertyDescriptors),r.definedByCollectionPropertyDescriptors||Object.defineProperties(r,collectionPropertyDescriptors),(t=r).push.apply(t,_toConsumableArray(e)),r}["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"].forEach(function(a){collectionPropertyDescriptors[a]={value:function(){var t;this.__collectionData||(this.__collectionData=[]);for(var e=this.length,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];var i=(t=Array.prototype[a]).call.apply(t,[this.__collectionData].concat(o));return this.finalizeData(e),this.definedByEventfulPropertyDescriptors&&this.triggerHandlers("change"),i}}}),["concat","includes","indexOf","join","lastIndexOf","slice","toSource","toString","toLocaleString","entries","every","filter","find","findIndex","forEach","keys","map","reduce","reduceRight","some","values"].forEach(function(n){collectionPropertyDescriptors[n]={value:function(){var t;this.__collectionData||(this.__collectionData=[]);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(t=Array.prototype[n]).call.apply(t,[this.__collectionData].concat(r))}}});