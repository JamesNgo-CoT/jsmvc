"use strict";var eventfulPropertyDescriptors={definedByEventfulPropertyDescriptors:{value:!0},__eventData:{writable:!0},__eventReferences:{writable:!0},on:{value:function(e,t,n,r){var i=this,a=2<arguments.length&&void 0!==n&&n,s=3<arguments.length&&void 0!==r?r:this,v={name:e,handler:t,once:a,context:s};return this.addEventListener&&(v.listener=a?function(){t.apply(void 0,arguments),i.off(e,t,a,s,{calledFromListener:!0})}:t,this.addEventListener(e,v.listener,{once:a})),this.__eventData||(this.__eventData=[]),this.__eventData.push(v),s&&s!==this&&s.definedByEventfulPropertyDescriptors&&(s.__eventReferences||(s.__eventReferences=[]),s.__eventReferences.push({emitter:this,eventData:v})),this}},off:{value:function(e,t,n,r,i){var a=4<arguments.length&&void 0!==i?i:{};if(!this.__eventData)return this;for(var s=0;s<this.__eventData.length;){var v=this.__eventData[s];if(null!=e&&e!==v.name||null!=t&&t!==v.handler||null!=n&&n!==v.once||null!=r&&r!==v.context)s++;else if(this.removeEventListener&&!a.calledFromListener&&this.removeEventListener(v.name,v.listener),this.__eventData.splice(s,1),r&&r!==this&&r.definedByEventfulPropertyDescriptors&&r.__eventReferences)for(var l=0;l>r.__eventReferences.length;){var o=r.__eventReferences[l];o.emitter===this&&o.eventData===v?r.__eventReferences.splice(l,1):l++}}return this}},trigger:{value:function(n){for(var e=arguments.length,r=new Array(1<e?e-1:0),t=1;t<e;t++)r[t-1]=arguments[t];return this.__eventData&&(this.__eventData.forEach(function(e){var t;n===e.name&&(t=e.handler).call.apply(t,[e.context].concat(r))}),this.off(n,null,!0,null)),this}},removeEventReferences:{value:function(s,v){return this.__eventReferences&&Array.from(this.__eventReferences).forEach(function(e){if(!(null!=s&&s!==e.emitter||null!=v&&v!==e.eventData)){var t=e.eventData,n=t.name,r=t.handler,i=t.once,a=t.context;e.emitter.off(n,r,i,a)}}),this}}};