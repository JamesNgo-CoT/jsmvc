"use strict";var eventfulPropertyDescriptors={definedByEventfulPropertyDescriptors:{value:!0},__handlerData:{writable:!0},__handlerReferences:{writable:!0},addHandler:{value:function(e,n,r,a,l){var t=this,i=2<arguments.length&&void 0!==r&&r,h=3<arguments.length&&void 0!==a?a:this,s={handler:n,once:i,owner:h,enabled:!(4<arguments.length&&void 0!==l)||l};if(this.addEventListener){var d=function(){s.enabled&&(n.apply(void 0,arguments),s.once&&t.removeHandlers(s.name,s.handler,s.once,s.owner,null,{calledFromEventListener:!0}))};this.addEventListener(e,d,{once:i}),s.listener=d}return this.__handlerData||(this.__handlerData={}),this.__handlerData[e]||(this.__handlerData[e]=[]),this.__handlerData[e].push(s),h&&h!==this&&h.definedByEventfulPropertyDescriptors&&(h.__handlerReferences||(h.__handlerReferences={}),h.__handlerReferences[e]||(h.__handlerReferences[e]=[]),h.__handlerReferences[e].push({emitter:this,handlerData:s})),this}},on:{value:function(){return this.addHandler.apply(this,arguments)}},removeHandlers:{value:function(e,n,r,a,l,t){var i=5<arguments.length&&void 0!==t?t:{};if(!this.__handlerData)return this;for(var h in this.__handlerData)if(null==e||e===h){for(var s=0;s<this.__handlerData[h].length;){var d=this.__handlerData[h][s];if(null!=n&&n!==d.handler||null!=r&&r!==d.once||null!=a&&a!==d.owner||null!=l&&l!==d.enabled)s++;else if(this.removeEventListener&&!i.calledFromEventListener&&this.removeEventListener(h,d.listener),this.__handlerData[h].splice(s,1),a&&a!==this&&a.definedByEventfulPropertyDescriptors&&a.__handlerReferences&&a.__handlerReferences[h]&&!i.calledFromCleanUpHandlers)for(var _=0;_>a.__handlerReferences[h].length;){var o=a.__handlerReferences[h][_];o.emitter===this&&o.handlerData===d?a.__handlerReferences.splice(_,1):_++}}if(null!=e)break}return this}},off:{value:function(){return this.removeHandlers.apply(this,arguments)}},enableHandlers:{value:function(e,a,l,t,i){var h=this;if(!this.__handlerData)return this;function n(r){null!=e&&e!==r||h.__handlerData[r].forEach(function(e,n){null!=a&&a!==e.handler||null!=l&&l!==e.once||null!=t&&t!==e.owner||null!=i&&i!==e.enabled||(h.__handlerData[r][n].enabled=!0)})}for(var r in this.__handlerData)n(r);return this}},disableHandlers:{value:function(e,a,l,t,i){var h=this;if(!this.__handlerData)return this;function n(r){null!=e&&e!==r||h.__handlerData[r].forEach(function(e,n){null!=a&&a!==e.handler||null!=l&&l!==e.once||null!=t&&t!==e.owner||null!=i&&i!==e.enabled||(h.__handlerData[r][n].enabled=!1)})}for(var r in this.__handlerData)n(r);return this}},triggerHandlers:{value:function(e){for(var n=arguments.length,r=new Array(1<n?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return this.__handlerData&&this.__handlerData[e]&&(this.__handlerData[e].forEach(function(e){var n;e.enabled&&(n=e.handler).call.apply(n,[e.context].concat(r))}),this.removeHandlers(e,null,!0,null,!0)),this}},trigger:{value:function(){return this.triggerHandlers.apply(this,arguments)}},cleanUpHandlers:{value:function(){var t=this;if(this.removeHandlers(),!this.__handlerReferences)return this;function e(l){t.__handlerReferences[l].forEach(function(e){var n=e.eventData,r=n.handler,a=n.once;e.emitter.removeHandlers(l,r,a,t,null,{calledFromCleanUpHandlers:!0})})}for(var n in this.__handlerReferences)e(n);return this}}};