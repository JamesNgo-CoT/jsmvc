"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var viewPropertyDescriptors={definedByViewPropertyDescriptors:{value:!0},__attributes:{writable:!0},setAttributes:{value:function(t){return this.__attributes=t,this}},__childElements:{writable:!0},setChildElements:{value:function(t){return this.__childElements=t,this}},promise:{writable:!0},render:{value:function(t,e){var i=this,r=1<arguments.length&&void 0!==e&&e;if(this.hasAttributes()){for(var n=[],o=0,s=this.attributes.length;o<s;o++)n.push(this.attributes[o].name);n.forEach(function(t){i.removeAttribute(t)})}for(;this.firstChild;)this.removeChild(this.firstChild);function u(t,e){if(e=e||i.appendChild(document.createElement("span")),Array.isArray(t))return e.parentNode.removeChild(e),l(t);if("function"==typeof t)return u(t(i),e);if(t instanceof Promise)return t.then(function(t){return u(t,e)});var r;if(t instanceof HTMLElement||t instanceof Text)e.parentNode.insertBefore(t,e),t.definedByViewPropertyDescriptors&&(r=t.promise);else if("string"==typeof t){var n=document.createElement("div");for(n.innerHTML=t;n.firstChild;)e.parentNode.insertBefore(n.firstChild,e)}return e.parentNode.removeChild(e),r}var f=function e(r){return"function"==typeof r?e(r(i)):r instanceof Promise?r.then(function(t){return e(t)}):"object"===_typeof(r)&&null!=r?Promise.all(Object.keys(r).map(function(t){return function e(t,r){return"object"!==_typeof(r)||null===r||Array.isArray(r)?"function"==typeof r?e(t,r(i)):r instanceof Promise?r.then(function(t){return e(t)}):void(null!=r&&i.setAttribute(t,r)):f(r)}(t,r[t])})):void 0},l=function e(t){return"function"==typeof t?e(t(i)):t instanceof Promise?t.then(function(t){return e(t)}):t instanceof HTMLElement?u(t):Array.isArray(t)?Promise.all(t.map(function(t){return u(t)})):null!=t?e([t]):void 0};return this.promise=Promise.all([f(this.__attributes),l(this.__childElements)]).then(function(){var e=[];return!r&&i.__childElements&&Array.isArray(i.__childElements)&&i.__childElements.forEach(function(t){t.definedByViewPropertyDescriptors&&e.push(t.render().promise)}),Promise.all(e)}).then(function(){if(t)return t=Array.isArray(t)?t:[t],Promise.all(t.map(function(t){return t(i)}))}).then(function(){return i}),this}}};