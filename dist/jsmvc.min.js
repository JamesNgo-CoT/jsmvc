"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var collectionPropertyDescriptors={definedByCollectionPropertyDescriptors:{value:!0},__collectionData:{writable:!0},length:{get:function(){return this.__collectionData?this.__collectionData.length:0}},finalizeData:{value:function(e){for(var t=this;e!==this.length;)e<this.length?function(){var n=String(e);Object.defineProperty(t,n,{configurable:!0,enumerable:!0,set:function(e){var t=this;if(this.__collectionData[n]!==e){var r=this.__collectionData[n];this.itemSetter.call(this,e,function(){t.__collectionData[n]=e,t.definedByEventfulPropertyDescriptors&&(t.trigger("change",n,e,r),t.trigger("change:".concat(n),e,r))})}},get:function(){var e=this;return this.itemGetter(function(){return e.__collectionData[n]})}}),e++}():(delete this[String(e-1)],e--)}},itemSetter:{value:function(e,t){t()}},itemGetter:{value:function(e){return e()}},toArray:{value:function(){return this.__collectionData.slice()}}};function collectionFactory(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.definedByEventfulPropertyDescriptors||Object.defineProperties(t,eventfulPropertyDescriptors),t.definedByCollectionPropertyDescriptors||Object.defineProperties(t,collectionPropertyDescriptors),t.push.apply(t,_toConsumableArray(e)),t}["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"].forEach(function(a){collectionPropertyDescriptors[a]={value:function(){var e;this.__collectionData||(this.__collectionData=[]);for(var t=this.length,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=(e=Array.prototype[a]).call.apply(e,[this.__collectionData].concat(n));return this.finalizeData(t),this.definedByEventfulPropertyDescriptors&&this.triggerHandlers("change"),o}}}),["concat","includes","indexOf","join","lastIndexOf","slice","toSource","toString","toLocaleString","entries","every","filter","find","findIndex","forEach","keys","map","reduce","reduceRight","some","values"].forEach(function(i){collectionPropertyDescriptors[i]={value:function(){var e;this.__collectionData||(this.__collectionData=[]);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=Array.prototype[i]).call.apply(e,[this.__collectionData].concat(r))}}});var eventfulPropertyDescriptors={definedByEventfulPropertyDescriptors:{value:!0},__handlerData:{writable:!0},__handlerReferences:{writable:!0},addHandler:{value:function(e,t,r,n,i){var o=this,a=2<arguments.length&&void 0!==r&&r,l=3<arguments.length&&void 0!==n?n:this,s={handler:t,once:a,owner:l,enabled:!(4<arguments.length&&void 0!==i)||i};if(this.addEventListener){var c=function(){s.enabled&&(t.apply(void 0,arguments),s.once&&o.removeHandlers(s.name,s.handler,s.once,s.owner,null,{calledFromEventListener:!0}))};this.addEventListener(e,c,{once:a}),s.listener=c}return this.__handlerData||(this.__handlerData={}),this.__handlerData[e]||(this.__handlerData[e]=[]),this.__handlerData[e].push(s),l&&l!==this&&l.definedByEventfulPropertyDescriptors&&(l.__handlerReferences||(l.__handlerReferences={}),l.__handlerReferences[e]||(l.__handlerReferences[e]=[]),l.__handlerReferences[e].push({emitter:this,handlerData:s})),this}},on:{value:function(){return this.addHandler.apply(this,arguments)}},removeHandlers:{value:function(e,t,r,n,i,o){var a=5<arguments.length&&void 0!==o?o:{};if(!this.__handlerData)return this;for(var l in this.__handlerData)if(null==e||e===l){for(var s=0;s<this.__handlerData[l].length;){var c=this.__handlerData[l][s];if(null!=t&&t!==c.handler||null!=r&&r!==c.once||null!=n&&n!==c.owner||null!=i&&i!==c.enabled)s++;else if(this.removeEventListener&&!a.calledFromEventListener&&this.removeEventListener(l,c.listener),this.__handlerData[l].splice(s,1),n&&n!==this&&n.definedByEventfulPropertyDescriptors&&n.__handlerReferences&&n.__handlerReferences[l]&&!a.calledFromCleanUpHandlers)for(var h=0;h>n.__handlerReferences[l].length;){var u=n.__handlerReferences[l][h];u.emitter===this&&u.handlerData===c?n.__handlerReferences.splice(h,1):h++}}if(null!=e)break}return this}},off:{value:function(){return this.removeHandlers.apply(this,arguments)}},enableHandlers:{value:function(e,n,i,o,a){var l=this;if(!this.__handlerData)return this;function t(r){null!=e&&e!==r||l.__handlerData[r].forEach(function(e,t){null!=n&&n!==e.handler||null!=i&&i!==e.once||null!=o&&o!==e.owner||null!=a&&a!==e.enabled||(l.__handlerData[r][t].enabled=!0)})}for(var r in this.__handlerData)t(r);return this}},disableHandlers:{value:function(e,n,i,o,a){var l=this;if(!this.__handlerData)return this;function t(r){null!=e&&e!==r||l.__handlerData[r].forEach(function(e,t){null!=n&&n!==e.handler||null!=i&&i!==e.once||null!=o&&o!==e.owner||null!=a&&a!==e.enabled||(l.__handlerData[r][t].enabled=!1)})}for(var r in this.__handlerData)t(r);return this}},triggerHandlers:{value:function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this.__handlerData&&this.__handlerData[e]&&(this.__handlerData[e].forEach(function(e){var t;e.enabled&&(t=e.handler).call.apply(t,[e.context].concat(r))}),this.removeHandlers(e,null,!0,null,!0)),this}},trigger:{value:function(){return this.triggerHandlers.apply(this,arguments)}},cleanUpHandlers:{value:function(){var o=this;if(this.removeHandlers(),!this.__handlerReferences)return this;function e(i){o.__handlerReferences[i].forEach(function(e){var t=e.eventData,r=t.handler,n=t.once;e.emitter.removeHandlers(i,r,n,o,null,{calledFromCleanUpHandlers:!0})})}for(var t in this.__handlerReferences)e(t);return this}}},modelPropertyDescriptors={definedByModelPropertyDescriptors:{value:!0},__propertyData:{writable:!0},setProperty:{value:function(n,e,t,r){var i=1<arguments.length&&void 0!==e?e:this[n],o=2<arguments.length&&void 0!==t?t:function(e,t){return t()},a=3<arguments.length&&void 0!==r?r:function(e){return e()};this.__propertyData||(this.__propertyData={}),void 0!==i&&(this.__propertyData[n]=i),delete this[n],Object.defineProperty(this,n,{configurable:!0,enumerable:!0,set:function(e){var t=this;if(this.__propertyData[n]!==e){var r=this.__propertyData[n];o.call(this,e,function(){t.definedByEventfulPropertyDescriptors&&(t.__propertyData[n]=e,t.trigger("change",n,e,r),t.trigger("change:".concat(n),e,r))})}},get:function(){var e=this;return a.call(this,function(){return e.__propertyData[n]})}})}},unsetProperty:{value:function(e){var t=this.__propertyData[e];delete this.__propertyData[e],delete this[e],void 0!==t&&(this[e]=t)}},toJSON:{value:function(){return Object.assign({},this.__propertyData)}}};function modelFactory(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};for(var t in e.definedByEventfulPropertyDescriptors||Object.defineProperties(e,eventfulPropertyDescriptors),e.definedByModelPropertyDescriptors||Object.defineProperties(e,modelPropertyDescriptors),e){var r=Object.getOwnPropertyDescriptor(e,t);r.get||r.set||e.setProperty(t)}return e}var viewPropertyDescriptors={definedByViewPropertyDescriptors:{value:!0},__attributes:{writable:!0},defineAttributes:{value:function(e){return this.__attributes=e,this}},renderAttributesPromise:{writable:!0},renderAttributes:{value:function(e){var l=this;if(this.hasAttributes()){for(var t=[],r=0,n=this.attributes.length;r<n;r++)t.push(this.attributes[r].name);t.forEach(function(e){return l.removeAttribute(e)})}function i(){if(e){Array.isArray(e)||(e=[e]);var r=[];return e.forEach(function(e){var t=e(l);t instanceof Promise&&r.push(t)}),0!==r.length?Promise.all(r):void 0}}var o=function r(e,n){if("function"==typeof e)return r(e(),n);if("object"===_typeof(e)){if(null===e)return;if(e instanceof Promise)return e.then(function(e){return r(e,n)});if(Array.isArray(e)){var i=[];return e.forEach(function(e){var t=r(e,n);t instanceof Promise&&i.push(t)}),0!==i.length?Promise.all(i):void 0}var t=[];for(var o in e){var a=r(e[o],o);a instanceof Promise&&t.push(a)}return 0!==t.length?Promise.all(t):void 0}if("boolean"==typeof e&&e)return r("",n);void 0!==e&&n&&l.setAttribute(n,String(e))}(this.__attributes,null);if(o instanceof Promise)this.renderAttributesPromise=o.then(function(){return i()}).then(function(){return l});else{var a=i();a instanceof Promise?this.renderAttributesPromise=a.then(function(){return l}):this.renderAttributesPromise=Promise.resolve(this)}return this}},__childElements:{writable:!0},defineChildElements:{value:function(e){return this.__childElements=e,this}},renderChildElementsPromise:{writable:!0},renderChildElements:{value:function(t,e){for(var n=this,r=!(1<arguments.length&&void 0!==e)||e;this.firstChild;)this.removeChild(this.firstChild);var i=document.createDocumentFragment(),o=function n(e,i){if("function"==typeof e)return n(e(),i);if("object"===_typeof(e)&&!(e instanceof HTMLElement||e instanceof Text)){if(null===e)return void i.parentNode.removeChild(i);if(e instanceof Promise)return e.then(function(e){return n(e,i)});if(Array.isArray(e)){var o=[];return e.forEach(function(e){var t=i.parentNode.insertBefore(document.createTextNode(" "),i),r=n(e,t);r instanceof Promise&&o.push(r)}),i.parentNode.removeChild(i),0!==o.length?Promise.all(o):void 0}var t=[];for(var r in e){var a=i.parentNode.insertBefore(document.createTextNode(" "),i),l=n(e[r],a);l instanceof Promise&&t.push(l)}return i.parentNode.removeChild(i),0!==t.length?Promise.all(t):void 0}if("string"==typeof e){var s=document.createElement("div");s.innerHTML=e;for(var c=[],h=0,u=s.childNodes.length;h<u;h++)c.push(s.childNodes[h]);return n(c,i)}(e instanceof HTMLElement||e instanceof Text)&&i.parentNode.insertBefore(e,i),i.parentNode.removeChild(i)}(this.__childElements,i.appendChild(document.createTextNode(" ")));this.appendChild(i);function a(){function e(){if(t){Array.isArray(t)||(t=[t]);var r=[];return t.forEach(function(e){var t=e(n);t instanceof Promise&&r.push(t)}),0!==r.length?Promise.all(r):void 0}}return o instanceof Promise?o.then(function(){return e()}):e()}var l=[];if(r&&this.__childElements.forEach(function(e){e.definedByViewPropertyDescriptors&&l.push(e.render().renderPromise)}),0!==l.length)this.renderChildElementsPromise=Promise.all(l).then(function(){return a()}).then(function(){return n});else{var s=a();s instanceof Promise?this.renderChildElementsPromise=s.then(function(){return n}):this.renderChildElementsPromise=Promise.resolve(this)}return this}},renderPromise:{writable:!0},render:{value:function(e,t){function r(){if(e){Array.isArray(e)||(e=[e]);var r=[];return e.forEach(function(e){var t=e(n);t instanceof Promise&&r.push(t)}),0!==r.length?Promise.all(r):void 0}}var n=this,i=!(1<arguments.length&&void 0!==t)||t,o=[];if(this.__attributes&&o.push(this.renderAttributes().renderAttributesPromise),this.__childElements&&o.push(this.renderChildElements(null,i).renderChildElementsPromise),0!==o.length)this.renderPromise=Promise.all(o).then(function(){return r()}).then(function(){return n});else{var a=r();a instanceof Promise?this.renderPromise=a.then(function(){return n}):this.renderPromise=Promise.resolve(this)}return this}}};function viewFactory(e,t,r,n){if("string"==typeof e&&(e=document.createElement(e)),e.definedByEventfulPropertyDescriptors||Object.defineProperties(e,eventfulPropertyDescriptors),e.hasAttributes())for(var i=0,o=e.attributes.length;i<o;i++){var a=e.attributes[i],l=a.name,s=a.value;(t="object"===_typeof(t)&&null!==t?Object.assign({},t):null==t?{}:{"original attributes":t})[l]=s}if(e.firstChild){for(var c,h=[],u=0,f=e.childNodes.length;u<f;u++)h.push(e.childNodes[u]);if(0<h.length)(c=r=Array.isArray(r)?r.slice():null==r?[]:[r]).unshift.apply(c,h)}return e.definedByViewPropertyDescriptors||Object.defineProperties(e,viewPropertyDescriptors),e.defineAttributes(t).defineChildElements(r).render(n,!1)}["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","big","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","viewFactoryl","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr"].forEach(function(n){viewFactory[n]=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return viewFactory.apply(void 0,[n].concat(t))}});